<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Viz</title>
  	<script src="periodic.js"></script>
	<script src="lib/coffee-script.js"></script>
	<script src="lib/jquery-2.1.1.min.js"></script>
	<script type="text/coffeescript" src="canvas.coffee"></script>
  <script type="text/literate-coffeescript" src="data.litcoffee"></script>
  <script type="text/literate-coffeescript" src="viz.litcoffee"></script>
  <script type="text/coffeescript">
  	$ () ->
      console.log "loaded"

      makeCanvas()
      blankCanvas()
      canvasContext.fillStyle = "red"

      keys = getKeys(periodic)

      console.log "keys: " + keys

      pen = 100

      for key in Object.keys(keys)
        $( "#x" ).append( "<option value='" + key + "'>" + key + "</option>" );
        $( "#y" ).append( "<option value='" + key + "'>" + key + "</option>" );

      $("#x,#y").on("change", () ->
        key = $("#x").val(); 
        ykey = $("#y").val();
        console.log "plotting " + key + ", " + ykey

        blankCanvas()

        xaxis = axis(periodic, key, [0, 400])
        yaxis = axis(periodic, ykey, [0, 400])
        values = (element for element in periodic)

        if xaxis.datatype is "number" and yaxis.datatype is "number"
          for value, i in values
            canvasContext.fillRect xaxis.scale(value[key]), yaxis.scale(value[ykey]), 4, 4
        else
          console.log "attempting categorical graph... "

          uniqueValues = values.unique()

          console.log uniqueValues
        );


  </script>
</head>
<body>
  <select id="x"></select> 
  <select id="y"></select> 
</body>
</html>